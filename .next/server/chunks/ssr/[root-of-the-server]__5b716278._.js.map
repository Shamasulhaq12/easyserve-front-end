{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/user/Downloads/easy-serve-ghulam-ali/src/app/admin/orders/page.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { motion } from \"framer-motion\";\nimport {\n  Clock,\n  Users,\n  ArrowRight,\n  CheckCircle2,\n  ChefHat,\n  Utensils,\n} from \"lucide-react\";\nimport axios from \"axios\";\n\n\nexport default function OrdersPage() {\n\n\n  const [orders, setOrders] = useState([]);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    const socket = connectOrderSocket(token, (payload) => {\n      if (payload.order) {\n        setOrders((prev) => {\n          const exists = prev.find((x) => x.id === payload.order.id);\n          return exists\n            ? prev.map((x) => x.id === payload.order.id ? payload.order : x)\n            : [payload.order, ...prev];\n        });\n      }\n    });\n\n    return () => socket.close();\n  }, []);\n\n\n\n\n\n  const apiPatchStatus = async (orderId, status, token) => {\n    const resp = await axios.patch(\n      `/api/restaurants/orders/${orderId}/status/`,\n      { status },\n      {\n        headers: {\n          Authorization: `Bearer ${token}`, // adapt to your auth\n        },\n      }\n    );\n    return resp.data;\n  };\n\n  // const [orders, setOrders] = useState([\n  //   { id: 1, table: 3, customer: \"Ali Khan\", items: [\"Pasta\", \"Garlic Bread\", \"1 Pepsi\"], status: \"To Prepare\", time: \"10 mins ago\" },\n  //   { id: 2, table: 1, customer: \"Fatima\", items: [\"Biryani\", \"2 Lemonades\"], status: \"Preparing\", time: \"25 mins ago\" },\n  //   { id: 3, table: 5, customer: \"Hamza\", items: [\"Zinger Burger\", \"Fries\", \"Cola\"], status: \"Prepared\", time: \"5 mins ago\" },\n  //   { id: 4, table: 2, customer: \"Zainab\", items: [\"Pizza\", \"Garlic Bread\"], status: \"Served\", time: \"30 mins ago\" },\n  // ]);\n\n  const statuses = [\"To Prepare\", \"Preparing\", \"Prepared\", \"Served\"];\n\n  const moveOrder = async (id, direction) => {\n    setOrders((prev) =>\n      prev.map((order) => {\n        if (order.id !== id) return order;\n        const idx = statuses.indexOf(order.status);\n        const newIndex = direction === \"next\" ? Math.min(idx + 1, statuses.length - 1) : Math.max(idx - 1, 0);\n        return { ...order, status: statuses[newIndex] }; // optimistic\n      })\n    );\n\n    try {\n      const order = orders.find(o => o.id === id);\n      const currentIndex = statuses.indexOf(order.status);\n      const newIndex = direction === \"next\" ? Math.min(currentIndex + 1, statuses.length - 1) : Math.max(currentIndex - 1, 0);\n      const token = typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\n      await apiPatchStatus(id, statuses[newIndex], token);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case \"To Prepare\":\n        return \"bg-yellow-50 border-yellow-200\";\n      case \"Preparing\":\n        return \"bg-blue-50 border-blue-200\";\n      case \"Prepared\":\n        return \"bg-green-50 border-green-200\";\n      case \"Served\":\n        return \"bg-gray-50 border-gray-200\";\n      default:\n        return \"bg-white border-gray-200\";\n    }\n  };\n\n  const getHeaderColor = (status) => {\n    switch (status) {\n      case \"To Prepare\":\n        return \"bg-yellow-100 text-yellow-800 border-yellow-300\";\n      case \"Preparing\":\n        return \"bg-blue-100 text-blue-800 border-blue-300\";\n      case \"Prepared\":\n        return \"bg-green-100 text-green-800 border-green-300\";\n      case \"Served\":\n        return \"bg-gray-100 text-gray-800 border-gray-300\";\n      default:\n        return \"bg-gray-50\";\n    }\n  };\n\n  const getStatusIcon = (status) => {\n    switch (status) {\n      case \"To Prepare\":\n        return <ChefHat className=\"w-5 h-5 text-yellow-600\" />;\n      case \"Preparing\":\n        return <Utensils className=\"w-5 h-5 text-blue-600\" />;\n      case \"Prepared\":\n        return <CheckCircle2 className=\"w-5 h-5 text-green-600\" />;\n      case \"Served\":\n        return <CheckCircle2 className=\"w-5 h-5 text-gray-500\" />;\n    }\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between bg-gradient-to-r from-yellow-50 to-yellow-100 border border-yellow-200 p-5 rounded-2xl shadow-sm\">\n        <h1 className=\"text-2xl font-bold text-yellow-800\">\n          üçΩÔ∏è Orders Status\n        </h1>\n        <p className=\"text-sm text-gray-500\">{new Date().toLocaleString()}</p>\n      </div>\n\n      {/* Columns */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6\">\n        {statuses.map((status) => (\n          <motion.div\n            key={status}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className={`rounded-2xl shadow-sm border ${getStatusColor(status)} flex flex-col min-h-[500px]`}\n          >\n            {/* Column Header */}\n            <div\n              className={`p-3 flex items-center justify-between rounded-t-2xl border-b font-semibold ${getHeaderColor(\n                status\n              )}`}\n            >\n              <div className=\"flex items-center gap-2\">\n                {getStatusIcon(status)}\n                <span>{status}</span>\n              </div>\n              <span className=\"text-xs font-medium bg-white px-2 py-1 rounded-md shadow-sm\">\n                {orders.filter((o) => o.status === status).length}\n              </span>\n            </div>\n\n            {/* Orders in Column */}\n            <div className=\"flex-1 overflow-y-auto p-3 space-y-4\">\n              {orders\n                .filter((o) => o.status === status)\n                .map((order) => (\n                  <motion.div\n                    key={order.id}\n                    whileHover={{ scale: 1.02 }}\n                    className=\"bg-white border border-gray-100 rounded-xl shadow-sm p-4 transition\"\n                  >\n                    <h3 className=\"text-lg font-semibold text-gray-800\">\n                      Table #{order.table}\n                    </h3>\n                    <p className=\"text-sm text-gray-600 mt-1 flex items-center\">\n                      <Users className=\"w-4 h-4 mr-1 text-yellow-600\" />\n                      {order.customer}\n                    </p>\n\n                    <ul className=\"list-disc ml-5 text-gray-600 mt-2 text-sm\">\n                      {order.items.map((item, i) => (\n                        <li key={i}>{item}</li>\n                      ))}\n                    </ul>\n\n                    <div className=\"flex justify-between items-center mt-4 text-sm\">\n                      <span className=\"flex items-center text-gray-500\">\n                        <Clock className=\"w-4 h-4 mr-1\" />\n                        {order.time}\n                      </span>\n                      <span\n                        className={`text-xs px-2 py-1 rounded-md ${\n                          order.status === \"Served\"\n                            ? \"bg-gray-100 text-gray-600\"\n                            : \"bg-yellow-50 text-yellow-700\"\n                        }`}\n                      >\n                        {order.status}\n                      </span>\n                    </div>\n\n                    {/* Action Buttons */}\n                    <div className=\"flex justify-end gap-2 mt-3\">\n                      {order.status !== \"To Prepare\" && (\n                        <button\n                          onClick={() => moveOrder(order.id, \"prev\")}\n                          className=\"text-xs px-3 py-1 rounded-md border text-gray-600 hover:bg-gray-100 transition\"\n                        >\n                          ‚¨Ö Back\n                        </button>\n                      )}\n                      {order.status !== \"Served\" && (\n                        <button\n                          onClick={() => moveOrder(order.id, \"next\")}\n                          className=\"text-xs px-3 py-1 rounded-md bg-yellow-600 text-white hover:bg-yellow-700 transition\"\n                        >\n                          Move ‚ûú\n                        </button>\n                      )}\n                    </div>\n                  </motion.div>\n                ))}\n\n              {/* Empty State */}\n              {orders.filter((o) => o.status === status).length === 0 && (\n                <div className=\"text-center text-sm text-gray-400 py-10 italic\">\n                  No orders in this stage\n                </div>\n              )}\n            </div>\n          </motion.div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}